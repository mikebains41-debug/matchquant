<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>MatchQuant</title>
  <meta name="theme-color" content="#0b1220" />
  <link rel="manifest" href="manifest.json" />

  <style>
    :root{
      --bg:#0b1220;
      --card:rgba(255,255,255,.06);
      --card2:rgba(0,0,0,.18);
      --border:rgba(255,255,255,.08);
      --text:#e5e7eb;
      --muted:#94a3b8;
      --blue:#3b82f6;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:radial-gradient(1200px 700px at 10% 0%, rgba(59,130,246,.22), transparent 60%),
                 radial-gradient(900px 600px at 90% 20%, rgba(14,165,233,.18), transparent 55%),
                 var(--bg);
      color:var(--text);
    }
    .wrap{
      max-width:900px;
      margin:0 auto;
      padding:18px 14px 40px;
    }
    .title{
      font-size:46px;
      line-height:1;
      font-weight:800;
      margin:6px 0 0;
      letter-spacing:.5px;
      text-shadow:0 10px 40px rgba(0,0,0,.35);
    }
    .subtitle{
      margin:6px 0 18px;
      color:var(--muted);
      opacity:.95;
    }
    .row{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      align-items:center;
    }
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.04));
      border:1px solid var(--border);
      border-radius:20px;
      padding:14px;
      box-shadow:0 20px 60px rgba(0,0,0,.25);
    }
    .card h2{
      margin:0 0 10px;
      font-size:36px;
      color:var(--blue);
      letter-spacing:.2px;
    }
    label{
      display:block;
      font-size:13px;
      color:var(--muted);
      margin:10px 0 6px;
    }
    select,input{
      width:100%;
      border-radius:16px;
      border:1px solid var(--border);
      padding:12px 12px;
      background:rgba(0,0,0,.18);
      color:var(--text);
      outline:none;
      font-size:16px;
    }
    input::placeholder{color:rgba(148,163,184,.7)}
    .btn{
      width:100%;
      border:0;
      border-radius:18px;
      padding:14px 14px;
      font-size:18px;
      font-weight:800;
      color:white;
      cursor:pointer;
      background:linear-gradient(180deg, rgba(59,130,246,1), rgba(37,99,235,1));
      box-shadow:0 18px 40px rgba(37,99,235,.35);
      margin-top:14px;
    }
    .btn:active{transform:translateY(1px)}
    .grid2{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:10px;
    }
    .grid2 .wide{grid-column:1 / -1;}
    .pill{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding:12px 12px;
      border-radius:18px;
      border:1px solid var(--border);
      background:rgba(0,0,0,.16);
      margin-top:10px;
    }
    .pill b{font-weight:800}
    .pill span{color:var(--muted)}
    .sectionTitle{
      margin:14px 0 8px;
      font-size:18px;
      font-weight:800;
    }
    #todayBox button{
      width:100%;
      text-align:left;
      padding:10px 12px;
      border-radius:14px;
      border:1px solid var(--border);
      background:rgba(0,0,0,.18);
      color:var(--text);
      margin:6px 0;
    }
    canvas{
      width:100%;
      border-radius:16px;
      border:1px solid var(--border);
      background:rgba(0,0,0,.15);
    }
    .small{font-size:12px;color:var(--muted);opacity:.95}
    @media (max-width:720px){
      .title{font-size:44px}
      .card h2{font-size:34px}
      .grid2{grid-template-columns:1fr}
    }
  </style>
</head>

<body>
  <div class="wrap">

    <div class="row" style="gap:14px;justify-content:space-between;">
      <div>
        <div class="title">MatchQuant</div>
        <div class="subtitle">Soccer Prediction Engine (xG lambdas + Monte Carlo 10,000 + EV flags + Auto fixtures + H2H)</div>
      </div>
    </div>

    <!-- ===== INPUT CARD ===== -->
    <div class="card">
      <h2>Mode 1 – Manual Match Input</h2>

      <label for="league">League</label>
      <select id="league">
        <option value="EPL">EPL</option>
        <option value="LaLiga">LaLiga</option>
        <option value="SerieA">SerieA</option>
        <option value="Bundesliga">Bundesliga</option>
        <option value="Ligue1">Ligue1</option>
        <option value="Portugal">Portugal</option>
      </select>
      <div class="small">League list auto-loads from <code>xg_tables.json</code> (your JSON must use the same league keys).</div>

      <button class="btn" type="button" onclick="/* optional: runPrediction will auto-run when clicking fixtures */ window.scrollTo({top:0,behavior:'smooth'})">
        Run ALL Leagues at Once
      </button>
      <div class="small">Uses <code>fixtures.json</code>. Add your real fixtures there (include dates for “today”).</div>

      <label for="homeTeam">Home Team (auto-suggest)</label>
      <input id="homeTeam" placeholder="Start typing… e.g., Arsenal" />

      <label for="awayTeam">Away Team (auto-suggest)</label>
      <input id="awayTeam" placeholder="Start typing… e.g., Aston Villa" />

      <div class="row" style="margin-top:10px;">
        <div class="pill" style="flex:1;">
          <span>Monte Carlo sims</span>
          <b><input id="sims" value="10000" style="width:110px;padding:8px 10px;border-radius:14px;margin:0;border:1px solid var(--border);" /></b>
        </div>
      </div>
      <div class="small" style="margin-top:8px;">Poisson goals + simulations → score distribution + win probabilities</div>

      <!-- ===== ODDS (for EV badges) ===== -->
      <div class="sectionTitle">Optional Odds (for EV flags) <span class="small">(decimal)</span></div>

      <div class="grid2">
        <div>
          <label for="oddsHome">ML Home</label>
          <input id="oddsHome" placeholder="e.g., 1.95" />
        </div>
        <div>
          <label for="oddsDraw">ML Draw</label>
          <input id="oddsDraw" placeholder="e.g., 3.60" />
        </div>
        <div>
          <label for="oddsAway">ML Away</label>
          <input id="oddsAway" placeholder="e.g., 3.90" />
        </div>
        <div>
          <label for="oddsOver25">O/U 2.5 Over</label>
          <input id="oddsOver25" placeholder="e.g., 1.85" />
        </div>
        <div>
          <label for="oddsUnder25">O/U 2.5 Under</label>
          <input id="oddsUnder25" placeholder="e.g., 2.05" />
        </div>
        <div>
          <label for="oddsAHHome">AH Home -0.5</label>
          <input id="oddsAHHome" placeholder="e.g., 2.05" />
        </div>

        <div>
          <label for="cornersLine">Corners Line (e.g., 9.5)</label>
          <input id="cornersLine" placeholder="e.g., 9.5" />
        </div>
        <div>
          <label for="cardsLine">Cards Line (e.g., 4.5)</label>
          <input id="cardsLine" placeholder="e.g., 4.5" />
        </div>

        <div>
          <label for="cornersOver">Corners Odds (Over)</label>
          <input id="cornersOver" placeholder="e.g., 1.90" />
        </div>
        <div>
          <label for="cornersUnder">Corners Odds (Under)</label>
          <input id="cornersUnder" placeholder="e.g., 1.95" />
        </div>

        <div>
          <label for="cardsOver">Cards Odds (Over)</label>
          <input id="cardsOver" placeholder="e.g., 1.85" />
        </div>
        <div>
          <label for="cardsUnder">Cards Odds (Under)</label>
          <input id="cardsUnder" placeholder="e.g., 2.05" />
        </div>
      </div>

      <button class="btn" type="button" onclick="runPrediction()">Run Prediction</button>
    </div>

    <!-- ===== RESULT CARD ===== -->
    <div class="card" style="margin-top:14px;">
      <h2>Result</h2>

      <div class="pill"><span>League:</span><b id="resLeague">—</b></div>
      <div class="pill"><span>Match:</span><b id="resMatch">—</b></div>
      <div class="pill"><span>xG Used:</span><b id="resXG">—</b></div>
      <div class="pill"><span>Predicted Score:</span><b id="resScore">—</b></div>
      <div class="pill"><span>O/U 2.5:</span><b id="resOU">—</b></div>
      <div class="pill"><span>Asian Handicap:</span><b id="resAH">—</b></div>
      <div class="pill"><span>Win Probabilities:</span><b id="resWin">—</b></div>
      <div class="pill"><span>EV Flags:</span><b id="resEV">—</b></div>
      <div class="pill"><span>Confidence Tier:</span><b id="resTier">—</b></div>
      <div class="pill"><span>Top Scorelines (MC):</span><b id="resTop">—</b></div>

      <!-- ===== TODAY + CHARTS ===== -->
      <div class="sectionTitle" style="margin-top:18px;">Today’s Fixtures (auto)</div>
      <div id="todayBox" class="small"></div>

      <div class="sectionTitle" style="margin-top:18px;">Chart</div>
      <canvas id="scoreChart" width="360" height="240"></canvas>

      <div class="small" style="margin-top:10px;">
        Tip: Tap a fixture above → it auto-fills teams and runs prediction.
      </div>
    </div>
  </div>

  <!-- Your app code -->
  <script src="app.js"></script>

  <!-- Optional: Service worker for install -->
  <script>
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("./sw.js").catch(()=>{});
    }
  </script>
</body>
</html>
