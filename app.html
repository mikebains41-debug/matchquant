<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>MatchQuant Soccer Engine</title>

<style>
:root{
  --bg1:#0b1633;
  --bg2:#050814;
  --card:#0f1a3a;
  --accent:#58a6ff;
  --accent2:#2f81f7;
  --text:#ffffff;
  --muted:#9fb6ff;
  --border:rgba(255,255,255,.1);
  --radius:18px;
}

*{box-sizing:border-box}
body{
  margin:0;
  font-family:Arial,Helvetica,sans-serif;
  background:radial-gradient(circle at top,var(--bg1),var(--bg2));
  color:var(--text);
}

.wrap{max-width:900px;margin:auto;padding:16px}
.card{
  background:var(--card);
  border-radius:var(--radius);
  padding:16px;
  margin-bottom:16px;
  border:1px solid var(--border);
}

h1,h2{color:var(--accent);margin:0 0 10px}
label{font-size:14px;color:var(--muted)}
input,select,button{
  width:100%;
  padding:14px;
  margin-top:8px;
  border-radius:14px;
  border:1px solid var(--border);
  background:#08122a;
  color:white;
  font-size:16px;
}

button{
  background:linear-gradient(90deg,var(--accent2),var(--accent));
  border:none;
  font-weight:bold;
  cursor:pointer;
}

.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:12px;
}

.row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:10px;
}

.small{font-size:13px;color:var(--muted)}
.k{font-weight:bold;color:#eaf0ff}
.v{color:var(--muted);text-align:right}

.loader{
  display:none;
  margin:12px auto;
  width:36px;height:36px;
  border:4px solid rgba(255,255,255,.2);
  border-top:4px solid var(--accent);
  border-radius:50%;
  animation:spin 1s linear infinite;
}
@keyframes spin{to{transform:rotate(360deg)}}
</style>
</head>

<body>
<div class="wrap">

<div class="card">
  <h1>MatchQuant</h1>
  <div class="small">Soccer Prediction Engine (xG-based)</div>
</div>

<div class="card">
  <h2>Mode 1 — Manual Match Input</h2>

  <label>League</label>
  <select id="league">
    <option value="EPL">EPL</option>
    <option value="LaLiga">LaLiga</option>
    <option value="SerieA">Serie A</option>
    <option value="Bundesliga">Bundesliga</option>
    <option value="Ligue1">Ligue 1</option>
    <option value="Portugal">Portugal</option>
  </select>

  <button onclick="runAll()">Run ALL Leagues at Once</button>

  <label>Home Team</label>
  <input id="home" placeholder="Arsenal"/>

  <label>Away Team</label>
  <input id="away" placeholder="Aston Villa"/>

  <button onclick="runSingle()">Run Prediction</button>

  <div class="loader" id="loader"></div>
</div>

<div class="card">
  <h2>Result</h2>

  <div class="row"><div class="k">League:</div><div id="rLeague" class="v">—</div></div>
  <div class="row"><div class="k">Match:</div><div id="rMatch" class="v">—</div></div>
  <div class="row"><div class="k">xG Used:</div><div id="rXg" class="v">—</div></div>
  <div class="row"><div class="k">Predicted Score:</div><div id="rScore" class="v">—</div></div>
  <div class="row"><div class="k">O/U 2.5:</div><div id="rOU" class="v">—</div></div>
  <div class="row"><div class="k">Asian Handicap:</div><div id="rAH" class="v">—</div></div>
  <div class="row"><div class="k">Corners:</div><div id="rCorners" class="v">—</div></div>
  <div class="row"><div class="k">Cards:</div><div id="rCards" class="v">—</div></div>
  <div class="row"><div class="k">Win Probabilities:</div><div id="rWin" class="v">—</div></div>

  <div class="small" id="status">xG tables loading…</div>
</div>

</div>

<script>
let XG={};

fetch("xg_tables.json")
.then(r=>r.json())
.then(d=>{
  XG=d.leagues;
  document.getElementById("status").innerText=
    "xG tables loaded ✔ ("+Object.keys(XG).length+" leagues)";
});

function simulate(home,away,lg){
  let h=XG[lg]?.[home]?.xg_for||1.35;
  let a=XG[lg]?.[away]?.xg_for||1.25;

  let hs=Math.round(h);
  let as=Math.round(a);

  document.getElementById("rLeague").innerText=lg;
  document.getElementById("rMatch").innerText=home+" vs "+away;
  document.getElementById("rXg").innerText=`Home λ ${h} / Away λ ${a}`;
  document.getElementById("rScore").innerText=`${hs}-${as}`;
  document.getElementById("rOU").innerText=(h+a>2.5?"Over":"Under");
  document.getElementById("rAH").innerText=(h>a?"Home -0.5":"0 (DNB lean)");
  document.getElementById("rCorners").innerText=(h+a>2.6?"Over 8.5":"Under 9.5");
  document.getElementById("rCards").innerText=(h+a>2.7?"Over 3.5":"Under 4.5");

  let hp=Math.round(h/(h+a)*100);
  let ap=Math.round(a/(h+a)*100);
  let dp=100-hp-ap;

  document.getElementById("rWin").innerText=
    `H ${hp}% / D ${dp}% / A ${ap}%`;
}

function runSingle(){
  let l=document.getElementById("league").value;
  simulate(
    document.getElementById("home").value.trim(),
    document.getElementById("away").value.trim(),
    l
  );
}

function runAll(){
  let home=document.getElementById("home").value.trim();
  let away=document.getElementById("away").value.trim();
  let leagues=Object.keys(XG);
  if(!home||!away)return alert("Enter teams first");
  simulate(home,away,leagues[0]);
}
</script>
</body>
</html>
